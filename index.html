<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        main {
            width: 100%;
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        form {
            width: 500px;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main>
        <form>
            <div class="mb-3">
              <label for="exampleInputName" class="form-label">Name</label>
              <input type="text" class="form-control" id="exampleInputName" aria-describedby="nameHelp">
            </div>
            <div class="mb-3">
              <label for="exampleInputPhone" class="form-label">Phone</label>
              <input type="text" class="form-control" id="exampleInputPhone">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');

            form.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent the form from submitting

                // Get the values entered in the form fields
                const name = document.getElementById('exampleInputName').value;
                const phone = document.getElementById('exampleInputPhone').value;

                // Get IP address
                fetch('https://api64.ipify.org?format=json')
                    .then(response => response.json())
                    .then(data => {
                        const ipAddress = data.ip;
                        
                        // Construct the message with all information
                        var my_text = `📝 **New Form Submission**%0A%0A👤 **Name:** ${name}%0A📞 **Phone:** ${phone}%0A🌐 **IP Address:** ${ipAddress}%0A%0A📅 **Date:** ${new Date().toLocaleDateString()}%0A🕒 **Time:** ${new Date().toLocaleTimeString()} (UTC)%0A%0A📎 **Attachment:** [Link or description]%0A------------------------`;

                        // Construct the Telegram API URL
                        var token = "6376687116:AAF6qojqgd-vAnd1lMAEC-c1kE1h7oKN1ec";
                        var chat_id = "-1002126193732";
                        var url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${my_text}`;

                        // Send the message to Telegram
                        let api = new XMLHttpRequest();
                        api.open("GET", url, true);
                        api.send();

                        // Log the values to the console
                        console.log("Message sent to Telegram");
                    })
                    .catch(error => console.error('Error fetching IP address:', error));
            });
        });
    </script>
</body>
</html>
